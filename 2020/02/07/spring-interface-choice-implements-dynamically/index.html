<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>spring - multiple implements : interface - 인터페이스의 구현체를 동적으로 선택하는 방법 - /* No Comment */</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="/* No Comment */"><meta name="msapplication-TileImage" content="/images/logo.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="/* No Comment */"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="동기본 글은 interface 란? spring 주입받아 사용하기 에서 이어집니다.  동적으로 구현체를 선택하는 방법을 알아보자  여러 판매자가 판매하는 상품을 장바구니에 담고 결제를 하였다고 가정해보자.각 판매자에게 구입 요청을 해야할것이다. 이때 판매자에게 할수 있는 행위들이 interface로 정의되어있고, 실제로 요청해야하는 판매자에 따라서 구현체를"><meta property="og:type" content="blog"><meta property="og:title" content="spring - multiple implements : interface - 인터페이스의 구현체를 동적으로 선택하는 방법"><meta property="og:url" content="https://hyeonguj.github.io/2020/02/07/spring-interface-choice-implements-dynamically/"><meta property="og:site_name" content="/* No Comment */"><meta property="og:description" content="동기본 글은 interface 란? spring 주입받아 사용하기 에서 이어집니다.  동적으로 구현체를 선택하는 방법을 알아보자  여러 판매자가 판매하는 상품을 장바구니에 담고 결제를 하였다고 가정해보자.각 판매자에게 구입 요청을 해야할것이다. 이때 판매자에게 할수 있는 행위들이 interface로 정의되어있고, 실제로 요청해야하는 판매자에 따라서 구현체를"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://hyeonguj.github.io/img/og_image.png"><meta property="article:published_time" content="2020-02-07T05:10:00.000Z"><meta property="article:modified_time" content="2023-08-15T14:39:15.295Z"><meta property="article:author" content="HyeonGuJ"><meta property="article:tag" content="java"><meta property="article:tag" content="spring"><meta property="article:tag" content="interface"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hyeonguj.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hyeonguj.github.io/2020/02/07/spring-interface-choice-implements-dynamically/"},"headline":"spring - multiple implements : interface - 인터페이스의 구현체를 동적으로 선택하는 방법","image":["https://hyeonguj.github.io/img/og_image.png"],"datePublished":"2020-02-07T05:10:00.000Z","dateModified":"2023-08-15T14:39:15.295Z","author":{"@type":"Person","name":"HyeonGuJ"},"publisher":{"@type":"Organization","name":"/* No Comment */","logo":{"@type":"ImageObject","url":null}},"description":"동기본 글은 interface 란? spring 주입받아 사용하기 에서 이어집니다.  동적으로 구현체를 선택하는 방법을 알아보자  여러 판매자가 판매하는 상품을 장바구니에 담고 결제를 하였다고 가정해보자.각 판매자에게 구입 요청을 해야할것이다. 이때 판매자에게 할수 있는 행위들이 interface로 정의되어있고, 실제로 요청해야하는 판매자에 따라서 구현체를"}</script><link rel="canonical" href="https://hyeonguj.github.io/2020/02/07/spring-interface-choice-implements-dynamically/"><link rel="icon" href="/images/logo.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><script data-ad-client="ca-pub-8619893351965038" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">/* No Comment */</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/HyeonGuJ"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-02-07T05:10:00.000Z" title="2/7/2020, 2:10:00 PM">2020-02-07</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-08-15T14:39:15.295Z" title="8/15/2023, 11:39:15 PM">2023-08-15</time></span><span class="level-item"> HyeonGuJ </span><span class="level-item"><a class="link-muted" href="/categories/spring/">spring</a></span><span class="level-item">8 minutes read (About 1139 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">spring - multiple implements : interface - 인터페이스의 구현체를 동적으로 선택하는 방법</h1><div class="content"><h1 id="동기"><a href="#동기" class="headerlink" title="동기"></a>동기</h1><p>본 글은 <a href="https://hyeonguj.github.io/2020/02/07/java-interface-1/">interface 란? spring 주입받아 사용하기</a> 에서 이어집니다.</p>
<blockquote>
<p>동적으로 구현체를 선택하는 방법을 알아보자</p>
</blockquote>
<p>여러 판매자가 판매하는 상품을 장바구니에 담고 결제를 하였다고 가정해보자.<br>각 판매자에게 구입 요청을 해야할것이다.</p>
<p>이때 판매자에게 할수 있는 행위들이 interface로 정의되어있고, 실제로 요청해야하는 판매자에 따라서 구현체를 바꾸어야한다면?? 어떻게 될까? 예시를 확인해보자</p>
<p>ex) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">라면 + 노트북을 장바구니에넣고 한번에 주문 -&gt; 내부적으로는 오뚜기 / LG전자에 구매 요청을 해야야한다</span><br><span class="line">주문, 주문취소, 환불이라는 행위자체는 동일하지만 요청해야하는 도메인정보등 세부정보는 다를것이다</span><br><span class="line">그리고 이공통점을 판매자라는 인터페이스로, 달라지는 세부적인 부분을 오뚜기/LG전자라는 구현체로 구현했다면?</span><br></pre></td></tr></table></figure>

<p>각 판매자에 해당하는 구현체를 선택하여 요청 로직을 실행해야할것이다.</p>
<span id="more"></span>

<h2 id="인터페이스-구현"><a href="#인터페이스-구현" class="headerlink" title="인터페이스 구현"></a>인터페이스 구현</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SampleInterface</span> &#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleInterfaceImpl</span> <span class="keyword">implements</span> <span class="title class_">SampleInterface</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleInterfaceOtherImpl</span> <span class="keyword">implements</span> <span class="title class_">SampleInterface</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="모든-인터페이스를-선언해놓고-분기처리하여-사용하기"><a href="#모든-인터페이스를-선언해놓고-분기처리하여-사용하기" class="headerlink" title="모든 인터페이스를 선언해놓고 분기처리하여 사용하기"></a>모든 인터페이스를 선언해놓고 분기처리하여 사용하기</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SampleInterfaceImpl basic;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SampleInterfaceOtherImpl other;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/path/Basic&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">basic</span><span class="params">()</span> &#123;</span><br><span class="line">        basic.sampleMethod();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/path/Other&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">other</span><span class="params">()</span> &#123;</span><br><span class="line">        other.sampleMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="인터페이스를-Map에-넣어두고-꺼내서-사용하기"><a href="#인터페이스를-Map에-넣어두고-꺼내서-사용하기" class="headerlink" title="인터페이스를 Map에 넣어두고 꺼내서 사용하기"></a>인터페이스를 Map에 넣어두고 꺼내서 사용하기</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SampleInterfaceImpl basic;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SampleInterfaceOtherImpl other;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, SampleInterface&gt; services;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        services = <span class="keyword">new</span> <span class="title class_">HashMap</span>()&lt;&gt;;</span><br><span class="line">        services.put(<span class="string">&quot;Basic&quot;</span>, basic);</span><br><span class="line">        services.put(<span class="string">&quot;Other&quot;</span>, other);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/path/&#123;service&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="meta">@PathVariable(&quot;service&quot;)</span> String service)</span>&#123;</span><br><span class="line">        <span class="type">SampleInterface</span> <span class="variable">sample</span> <span class="operator">=</span> services.get(service);</span><br><span class="line">        <span class="comment">// remember to handle the case where there&#x27;s no corresponding service</span></span><br><span class="line">        sample.sampleMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="ApplicationContext-를-활용하는-방법"><a href="#ApplicationContext-를-활용하는-방법" class="headerlink" title="ApplicationContext 를 활용하는 방법"></a>ApplicationContext 를 활용하는 방법</h2><p>구현체를 bean으로등록하고</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleInterfaceImpl</span> <span class="keyword">implements</span> <span class="title class_">SampleInterface</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sampleMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleInterfaceOtherImpl</span> <span class="keyword">implements</span> <span class="title class_">SampleInterface</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sampleMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ApplicationContext 의 getBean() 으로 구현체를 로딩하여 사용한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext appContext;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/path/&#123;service&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="meta">@PathVariable(&quot;service&quot;)</span> String service)</span>&#123;</span><br><span class="line">        <span class="type">SampleInterface</span> <span class="variable">sample</span> <span class="operator">=</span> appContext.getBean(service, SampleInterface.class);</span><br><span class="line">        sample.sampleMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Spring의-DI의-도움을-받는-방법"><a href="#Spring의-DI의-도움을-받는-방법" class="headerlink" title="Spring의 DI의 도움을 받는 방법"></a>Spring의 DI의 도움을 받는 방법</h2><p>set이나list, map을 통해 자동으로 등록해준다</p>
<p>SampleInterface를 구현한 모든 인터페이스를 리스트에 주입</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> List&lt;SampleInterface&gt; SampleInterfaces;</span><br></pre></td></tr></table></figure>

<p>SampleInterface를 구현한 모든 인터페이스를 맵에 주입한다. key는 구현체의  bean name.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Map&lt;String, SampleInterface&gt; SampleInterfaceMap;</span><br></pre></td></tr></table></figure>

<p>그리고 사용하는곳에서는 맵에서 bean name을통해 선택하여 사용 할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">excuteSampleMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">interfaceName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//enum으로 구분하거나, 조건에 맞게 수동으로분기하거나 서비스에맞게 고른다.</span></span><br><span class="line">    <span class="keyword">if</span> (isFirst()) &#123;</span><br><span class="line">        interfaceName = <span class="string">&quot;SampleInterfaceImpl&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        interfaceName = <span class="string">&quot;SampleInterfaceOtherImpl&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">SampleInterface</span> <span class="variable">impl</span> <span class="operator">=</span> SampleInterfaceMap.get(interfaceName);</span><br><span class="line">    impl.sampleMethod();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="enum으로-정책정하기"><a href="#enum으로-정책정하기" class="headerlink" title="enum으로 정책정하기"></a>enum으로 정책정하기</h3><p>위처럼 분기처리하는대신 정책을 정리하는 enum을 두는것도 하나의 방법이다<br>먼저 동적으로 달라지는 종류를 enum으로 정의하고, 구현체의 이름을 적어준다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SampleType</span> &#123;</span><br><span class="line">    SAMPLE(<span class="string">&quot;SampleInterfaceImpl&quot;</span>),</span><br><span class="line">    OTHERS(<span class="string">&quot;SampleInterfaceOtherImpl&quot;</span>)</span><br><span class="line"></span><br><span class="line">    SampleType(String implementation) &#123;</span><br><span class="line">        <span class="built_in">this</span>.implementation = implementation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getImplementation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.implementation;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이후 선택된 type에 맞게 구현체를 선택하여 기능을 수행한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">excuteSampleMethod</span><span class="params">(SampleType sampleType)</span> &#123;    </span><br><span class="line"></span><br><span class="line">    <span class="type">SampleInterface</span> <span class="variable">impl</span> <span class="operator">=</span> SampleInterfaceMap.get(sampleType.getImplementation);</span><br><span class="line">    impl.sampleMethod();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="내가-선택한-방법"><a href="#내가-선택한-방법" class="headerlink" title="내가 선택한 방법"></a>내가 선택한 방법</h2><p>마지막에 소개한 <code>Spring의 DI의 도움을 받는 방법</code> 으로 구현하였다.<br>실제로는 로직이 필요하지는 않고 특정 데이터의 종류에 맞게 구현체를 선택만 하면 되는 스팩이었다<br>enum으로 정책을 한곳에서 관리해도되지만, 특정조건을 검사하는 <code>책임</code>을 <code>각 구현체들이</code> 검사하는것이 더 맞다고 생각하였다.</p>
<p>각 구현체에서는 자신을 실행할수 있는지 여부를 검사하는 책임을 가진다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleInterfaceImpl</span> <span class="keyword">implements</span> <span class="title class_">SampleInterface</span> &#123;</span><br><span class="line">    <span class="meta">@Overide</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAvailableType</span><span class="params">(SampleType)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>그리고 중간에서 중계해주는 <code>Router</code>를 하나 만들어 주었다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleInterfaceRouter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;SampleInterface&gt; sampleInterfaces; <span class="comment">//의존성 List로 주입</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> SampleInterface <span class="title function_">getImplemetationByType</span><span class="params">(SampleType sampleType)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sampleInterfaces.stream()</span><br><span class="line">                            .filter(e -&gt; e.isAvailableType(sampleType)) <span class="comment">//각 구현체에서 판단</span></span><br><span class="line">                            .findFirst().orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">NotSupportedTypeException</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>사용은 아래와같이 하면된다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">SampleInterfaceRouter sampleInterfaceRouter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">excuteSampleMethod</span><span class="params">(SampleType sampleType)</span> &#123;    </span><br><span class="line"></span><br><span class="line">    <span class="type">SampleInterface</span> <span class="variable">impl</span> <span class="operator">=</span> sampleInterfaceRouter.getImplemetationByType(sampleType);</span><br><span class="line">    impl.sampleMethod();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/19027319">https://stackoverflow.com/a/19027319</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/37413949">https://stackoverflow.com/a/37413949</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/37408117">https://stackoverflow.com/a/37408117</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/q/10534053">https://stackoverflow.com/q/10534053</a></p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/java/">java</a><a class="link-muted mr-2" rel="tag" href="/tags/spring/">spring</a><a class="link-muted mr-2" rel="tag" href="/tags/interface/">interface</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/02/09/how-to-make-gitpage-with-hexo-1/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[blog] hexo로 github page 블로그 만들기 </span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/02/07/java-interface-1/"><span class="level-item">interface 란? spring interface injection - interface의 구현체 주입</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "efc7c70cedaf57321e9b66c47dfa027f",
            repo: "https://github.com/HyeonGuJ/hyeonguj.github.io",
            owner: "hyeonguj",
            clientID: "8422415af3386597eb1c",
            clientSecret: "c0cd82399cc77e066c790ea441d450edb80b5843",
            admin: ["hyeonguj"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 5,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "ko-kr",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#동기"><span class="level-left"><span class="level-item">1</span><span class="level-item">동기</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#인터페이스-구현"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">인터페이스 구현</span></span></a></li><li><a class="level is-mobile" href="#모든-인터페이스를-선언해놓고-분기처리하여-사용하기"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">모든 인터페이스를 선언해놓고 분기처리하여 사용하기</span></span></a></li><li><a class="level is-mobile" href="#인터페이스를-Map에-넣어두고-꺼내서-사용하기"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">인터페이스를 Map에 넣어두고 꺼내서 사용하기</span></span></a></li><li><a class="level is-mobile" href="#ApplicationContext-를-활용하는-방법"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">ApplicationContext 를 활용하는 방법</span></span></a></li><li><a class="level is-mobile" href="#Spring의-DI의-도움을-받는-방법"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">Spring의 DI의 도움을 받는 방법</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#enum으로-정책정하기"><span class="level-left"><span class="level-item">1.5.1</span><span class="level-item">enum으로 정책정하기</span></span></a></li></ul></li><li><a class="level is-mobile" href="#내가-선택한-방법"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">내가 선택한 방법</span></span></a></li></ul></li><li><a class="level is-mobile" href="#참고자료"><span class="level-left"><span class="level-item">2</span><span class="level-item">참고자료</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8619893351965038" data-ad-slot="6239790314" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/bmo.png" alt="HyeonGuJ"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">HyeonGuJ</p><p class="is-size-6 is-block">급속성장 개발이</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">40</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">38</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/HyeonGuJ" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/HyeonGuJ"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="e-mail" href="/jhg3182@naver.com"><i class="fas fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/MSA/"><span class="level-start"><span class="level-item">MSA</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/blog/"><span class="level-start"><span class="level-item">blog</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/coding-test/"><span class="level-start"><span class="level-item">coding-test</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/etc/"><span class="level-start"><span class="level-item">etc</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/javascript/"><span class="level-start"><span class="level-item">javascript</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/spring/"><span class="level-start"><span class="level-item">spring</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/tools/"><span class="level-start"><span class="level-item">tools</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/baekjoon/"><span class="tag">baekjoon</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/blog/"><span class="tag">blog</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/browser/"><span class="tag">browser</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chrome/"><span class="tag">chrome</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ddd/"><span class="tag">ddd</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/enum/"><span class="tag">enum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/excel/"><span class="tag">excel</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/exception/"><span class="tag">exception</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/front/"><span class="tag">front</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/grpc/"><span class="tag">grpc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/https/"><span class="tag">https</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/icarus/"><span class="tag">icarus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/intellij/"><span class="tag">intellij</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/interface/"><span class="tag">interface</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jenkin/"><span class="tag">jenkin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jpa/"><span class="tag">jpa</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jquery/"><span class="tag">jquery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/js/"><span class="tag">js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jvm/"><span class="tag">jvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mac/"><span class="tag">mac</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mustache/"><span class="tag">mustache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mybatis/"><span class="tag">mybatis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/online-judge/"><span class="tag">online_judge</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plugin/"><span class="tag">plugin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/querydsl/"><span class="tag">querydsl</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/server/"><span class="tag">server</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sleuth/"><span class="tag">sleuth</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring/"><span class="tag">spring</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-initializr/"><span class="tag">spring initializr</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-boot/"><span class="tag">spring-boot</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tracing/"><span class="tag">tracing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zipkin/"><span class="tag">zipkin</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">/* No Comment */</a><p class="is-size-7"><span>&copy; 2023 HyeonGuJ</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>